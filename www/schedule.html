<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Ke hoach bao tri</title>
<link rel="stylesheet" href="css/style.css" type="text/css" />
<link rel="stylesheet" href="css/jquery-ui.css" type="text/css" />
<script type="text/javascript" src="js/custom.js"></script>
<script type="text/javascript" src="js/jquery-1.10.1.js"></script>
<script type="text/javascript" src="js/jquery-ui.js"></script>
<script type="text/javascript" src="js/schedule.js"></script>
<script type="text/javascript">
	$(function(){
		var x = $(window).width(); 
		var y = $(window).height(); 
		$("#container").css("width",x); 
		$("#container").css("height",y);		
		x -= 5;
		y -= 35;		
		var left = x/4;
		var right = x - left + 2.5;
		$("#left").css("width",left); 
		$("#left").css("height",y); 
		$("#right").css("width",right); 
		$("#right").css("height",y); 
		$("#ttbt").css("width",right); 
		$("#ttbt").css("height",y - 30);
		$("#top").css("height",y-101); 
		$("#danhsachbaotri").css('height',y-160); 
		$(".icon_click").on('click', function () {
			$(this).animate({top:"-=5"}, 100);
			$(this).animate({top:"+=5"}, 100);
		});
		
		$('.loading').each(function(){
			var w = $(this).parent().css('width');
			var h = $(this).parent().css('height');
			$(this).css('width', w);
			$(this).css('height', h);
		});
		
		function getDaysInMonth(m, y) {						
  			return /8|3|5|10/.test(--m)?30:m==1?(!(y%4)&&y%100)||!(y%400)?29:28:31;
		}
		
		$(".datepicker").datepicker({
			changeMonth: true,
			changeYear: true,
			showButtonPanel: true,
			dateFormat: 'mm/yy',
			onClose: function(dateText, inst) { 
				var month = $("#ui-datepicker-div .ui-datepicker-month :selected").val();
				var year = $("#ui-datepicker-div .ui-datepicker-year :selected").val();
				$(this).datepicker('setDate', new Date(year, month, 1));
				var days = getDaysInMonth(parseInt(month) + 1, year);				
				
				var i;
				var s = '<table class="tb_lbt" ><tr><td class="tenthietbi">Tên thiết bị</td>';
				for (i = 1; i <= days; i++){
					s += '<td>'+i+'</td>';
				}
				s += '</tr></table>';
				
				$('#table_schedule').html(s);				
			}
		});		
		
		$('.add_icon').on('click', function(){
			$("#ttbt .time").show();
			$('#table_schedule').show();
		});
		
		get_thietbi();
				
	});
	
</script>
</head>
<body>
  <div id="container">  
  	<div class="header">
        <div class="home"> <img src="img/back.png" width="15px" height="15px" /> <a
                    href="menu.html">Chức Năng</a> </div>
        <h1 class="title_header">KẾ HOẠCH BẢO TRÌ</h1>  
    </div> 		
	<div id="left">
		<div class="sub_header relative">
       		<span class="add_icon icon_click" style="display:none"></span>
			<h1>Lịch bảo trì</h1>
		</div>
		<div class='time' > 					
        	<p>
				<span style="margin-right:10px; margin-left:10px;">Tháng:</span>													
				<input id="from" class="input datepicker" type="text" style="margin-top:10px"/>
			</p>
            
		</div>
		<ul id="danhsachbaotri" style="overflow:auto;">
			<div class="loading">
            	<img src="images/ajax-loader.gif" />
            </div>
		</ul>
		
	</div>
	<div id="right">
		<div class="sub_header relative">
        	<span class="edit_icon icon_click"> </span>
			<h1>Thông tin bảo trì</h1>
		</div>
        <div id="ttbt">
        	<div class="loading">
            	<img src="images/ajax-loader.gif" />
            </div>
            <div class='time' style="display:none">
                <p> 					
                    <span style="margin-right:10px; margin-left:10px;">Tháng:</span>													
                    <input id="from_2" type="text" class="input datepicker" style="margin-top:10px"/>								
                </p>
            </div>
            <div style="overflow:auto; width:100%; margin-top:10px; display:none" id="table_schedule">
            
            </div>
        </div>
	</div>
  </div>
  
</body>
</html>
